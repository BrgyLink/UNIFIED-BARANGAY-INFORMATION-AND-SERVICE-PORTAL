@page
@model BrgyLink.Pages.ManageResident.DeleteModel

@{
    ViewData["Title"] = "Delete Resident";
    Layout = "~/Pages/Shared/_AdminLayout.cshtml";
}
<!-- Table Title -->
<div class="mb-4">
    <div class="card shadow-sm border-0">
        <div class="card-body d-flex justify-content-between align-items-center">
            <!-- Section Title -->
            <div>
                <h3 class="card-title mb-0">@Html.DisplayFor(model => model.Resident.FirstName) @Html.DisplayFor(model => model.Resident.LastName) <b> - Details</b></h3>
                <p class="text-muted mb-0">You are now viewing @Html.DisplayFor(model => model.Resident.FirstName) informations.</p>
            </div>
        </div>
    </div>
</div>
<!-- Resident Info (Profile Image & Personal Information) -->
<div class="row mb-4">
    <!-- Profile Image Card -->
    <div class="mx grid-margin col-md-3 text-center">
        <div class="card shadow-sm">
            <div class="card-body">
                <h5 class="card-title mb-3">Profile</h5>
                @if (Model.Resident.ImageData != null)
                {
                    <img src="data:image/jpeg;base64,@Convert.ToBase64String(Model.Resident.ImageData)" class="img-fluid rounded-circle shadow-lg" alt="Resident Photo" style="width: 180px; height: 180px; object-fit: cover;" />
                }
                else
                {
                    <img src="/images/avatarPlaceholder.jpg" class="img-fluid rounded-circle shadow-lg" alt="Resident Photo" style="width: 180px; height: 180px;" />
                }
                <h5 class="mt-3 font-weight-bold">@Model.Resident.FirstName @Model.Resident.LastName</h5>
            </div>
        </div>
    </div>

    <!-- Personal Information Card -->
    <div class="col-md-9">
        <div class="card mb-4 shadow-sm">
            <div class="card-body">
                <h5 class="card-title">Personal Information</h5>
                <dl class="row">
                    <dt class="col-sm-4">First Name</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.Resident.FirstName)</dd>

                    <dt class="col-sm-4">Last Name</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.Resident.LastName)</dd>

                    <dt class="col-sm-4">Middle Name</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.Resident.MiddleName)</dd>

                    <dt class="col-sm-4">Birthdate</dt>
                    <dd class="col-sm-8">@Model.Resident.BirthDate.ToString("MMMM dd, yyyy")</dd>

                    <dt class="col-sm-4">Gender</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.Resident.Gender)</dd>

                    <dt class="col-sm-4">Civil Status</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.Resident.CivilStatus)</dd>
                </dl>
            </div>
        </div>
    </div>
</div>

<!-- Contact and Additional Information (Side-by-Side with Equal Height) -->
<div class="row mb-4">
    <!-- Contact Information Card -->
    <div class="col-md-6">
        <div class="card mb-4 shadow-sm">
            <div class="card-body">
                <h5 class="card-title">Contact Information</h5>
                <dl class="row">
                    <dt class="col-sm-4">Address</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.Resident.Address)</dd>

                    <dt class="col-sm-4">Contact Number</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.Resident.ContactNumber)</dd>

                    <dt class="col-sm-4">Email</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.Resident.Email)</dd>
                </dl>
            </div>
        </div>
    </div>

    <!-- Residency and Special Status Information Card -->
    <div class="col-md-6">
        <div class="card mb-4 shadow-sm">
            <div class="card-body">
                <h5 class="card-title">Residency & Special Status</h5>
                <dl class="row">
                    <dt class="col-sm-4">Residency Status</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.Resident.ResidencyStatus)</dd>

                    <dt class="col-sm-4">Senior Citizen</dt>
                    <dd class="col-sm-8">
                        @(Model.Resident.IsSeniorCitizen ? "Yes" : "No")
                    </dd>

                    <dt class="col-sm-4">PWD</dt>
                    <dd class="col-sm-8">
                        @(Model.Resident.IsPWD ? "Yes" : "No")
                    </dd>
                </dl>
            </div>
        </div>
    </div>
</div>

<!-- Voter Status and Emergency Cards Side-by-Side -->
<div class="row mb-4">
    <!-- Voter Status & Registration Card -->
    <div class="col-md-6">
        <div class="card mb-4 shadow-sm">
            <div class="card-body">
                <h5 class="card-title">Voter Status & Registration</h5>
                <dl class="row">
                    <dt class="col-sm-4">Voter Status</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.Resident.VoterStatus)</dd>

                    <dt class="col-sm-4">Date Registered</dt>
                    <dd class="col-sm-8">@Model.Resident.DateRegistered.ToString("MMMM dd, yyyy")</dd>
                </dl>
            </div>
        </div>
    </div>

    <!-- Health & Emergency Information Card -->
    <div class="col-md-6">
        <div class="card mb-4 shadow-sm">
            <div class="card-body">
                <h5 class="card-title">Health & Emergency Information</h5>
                <dl class="row">
                    <dt class="col-sm-4">Emergency Contact</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.Resident.EmergencyContact)</dd>

                    <dt class="col-sm-4">Health Conditions</dt>
                    <dd class="col-sm-8">@Html.DisplayFor(model => model.Resident.HealthConditions)</dd>
                </dl>
            </div>
        </div>
    </div>
</div>


           
                <div class="card-body text-center">
                    <form method="post" id="deleteForm">
                        <input type="hidden" asp-for="Resident.ResidentID" />
                        <div class="d-flex justify-content-center gap-3">
                            <button type="button" id="deleteButton" class="btn btn-danger">Delete</button>
                            <a asp-page="./Index" class="btn btn-primary">Back to List</a>
                        </div>
                    </form>
                </div>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- SweetAlert2 CDN -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        $(document).ready(function () {
            $("#deleteButton").click(function () {
                // Show SweetAlert for confirmation
                Swal.fire({
                    title: 'Are you sure?',
                    text: "You won't be able to revert this!",
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#d33',
                    cancelButtonColor: '#ccc',
                    confirmButtonText: 'Yes, delete it!'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // If confirmed, submit the form
                        $("#deleteForm").submit();
                    }
                });
            });

            // Back to list button click (no change needed)
            $('#backToListBtn').click(function () {
                window.location.href = '/ManageResident/Index'; // Adjust the path if needed
            });
        });
    </script>
}